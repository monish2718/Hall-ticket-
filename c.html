<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>University Hall Ticket Generator</title>

<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

<style>
body {
    font-family: Arial, Helvetica;
    background: #e9edf3;
    margin: 0;
    padding: 0;
}

.container {
    width: 420px;
    margin: 20px auto;
    padding: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px #0003;
}

.container input {
    width: 100%;
    padding: 10px;
    margin-top: 8px;
    border: 1px solid #777;
    border-radius: 6px;
}

button {
    width: 100%;
    margin-top: 12px;
    padding: 12px;
    border: none;
    background: #002147;
    color: pink;
    font-size: 15px;
    border-radius: 6px;
    cursor: pointer;
}

button:hover { background: #003a88; }

.ticket {
    width: 820px;
    margin: 20px auto;
    background: white;
    padding: 25px;
    border: 5px solid black;
    page-break-after: always;
}

table { width: 100%; border-collapse: collapse; }
td, th { border: 1px solid black; padding: 6px; font-size: 14px; }

@media print { .container { display: none; } }

.photo-box {
    width: 100px;
    height: 100px;
    border: 1px solid black;
    object-fit: cover;
}
</style>
</head>

<body>

<div class="container">
    <h3 style="text-align:center;">UNIVERSITY HALL TICKET GENERATOR</h3>

    <input id="collegeName" placeholder="Enter College Name">

    <input id="name" placeholder="Student Name">
    <input id="dob" placeholder="Date of Birth (DD/MM/YYYY)">
    <input id="gender" placeholder="Gender (Male/Female)">
    <input id="roll" placeholder="Roll Number (optional)">
    <input id="course" placeholder="Course (BCA, BCom, etc.)">
    <input type="file" id="photo" accept="image/*">

    <button onclick="saveStudent()">Save Student</button>
    <button onclick="generateTickets()">Generate All Hall Tickets</button>
    <button onclick="window.print()">PRINT</button>
</div>

<div id="output"></div>

<script>
let students = [];
let photos = {};
let collegeCode = "1727";

// REGISTER NUMBER START â†’ END
let regStart = 212506419;
let regEnd = 222511642;

// store uploaded photo
document.getElementById("photo").addEventListener("change", function(e){
    let f = e.target.files[0];
    let r = new FileReader();
    r.onload = ev => photos["temp"] = ev.target.result;
    r.readAsDataURL(f);
});

function saveStudent(){
    let stu = {
        name: document.getElementById("name").value,
        dob: document.getElementById("dob").value,
        gender: document.getElementById("gender").value,
        course: document.getElementById("course").value,
        photo: photos["temp"] || ""
    };

    students.push(stu);

    alert("Student Saved! Enter next student.");

    document.getElementById("name").value = "";
    document.getElementById("dob").value = "";
    document.getElementById("gender").value = "";
    document.getElementById("roll").value = "";
    document.getElementById("course").value = "";
    document.getElementById("photo").value = "";
}

// register number generator (auto increments)
function reg(i){
    let rn = regStart + i;
    if(rn > regEnd){
        alert("Max Register Number Limit Reached!");
        return regEnd;
    }
    return rn;
}

function generateTickets(){
    let CN = document.getElementById("collegeName").value;
    let out = "";

    students.forEach((stu,i)=>{
        let r = reg(i);

        out += `
        <div class="ticket">

            <table>
                <tr>
                    <td style="border:none;">
                        <img src="https://upload.wikimedia.org/wikipedia/en/2/21/University_of_Madras_Logo.png" width="90">
                    </td>
                    <td style="border:none;text-align:center;">
                        <h2>UNIVERSITY OF MADRAS</h2>
                        <h3>NOVEMBER - 2025</h3>
                        <h3><b>HALL TICKET</b></h3>
                    </td>
                    <td style="border:none;text-align:right;">
                        <img src="${stu.photo}" class="photo-box">
                    </td>
                </tr>
            </table>

            <table style="margin-top:10px;">
                <tr><th>COLLEGE NAME</th><th>CENTRE CODE</th><th>COURSE</th></tr>
                <tr><td>${CN}</td><td>${collegeCode}</td><td>${stu.course}</td></tr>
            </table>

            <table style="margin-top:10px;">
                <tr><th>NAME OF THE CANDIDATE</th><th>SEX</th><th>REGISTER NO</th><th>DOB</th></tr>
                <tr>
                    <td>${stu.name}</td>
                    <td>${stu.gender}</td>
                    <td>${r}</td>
                    <td>${stu.dob}</td>
                </tr>
            </table>

            <!-- SUBJECT BOX -->
            <div style="border:2px solid #000;padding:12px;margin-top:20px;border-radius:6px;background:#f7f7f7;">
                <h4 style="margin:0 0 10px 0;">SUBJECTS & DETAILS</h4>
                <p style="margin-bottom:10px;font-size:13px;">
                    Subject codes the candidate is appearing for:<br>
                    <b>100L1A 100L1Z 120B1A 120C11 120C1A 120E10 120S1A</b>
                </p>

                <table>
                    <tr><th>CODE</th><th>SUBJECT</th><th>DATE</th><th>TIME</th><th>SESSION</th></tr>
                    <tr><td>100L1A</td><td>Tamil Ilakkiya Varalaru</td><td>22/11/2025</td><td>10 AM - 1 PM</td><td>FN</td></tr>
                    <tr><td>100L1Z</td><td>General English - 1</td><td>24/11/2025</td><td>10 AM - 1 PM</td><td>FN</td></tr>
                    <tr><td>120C1A</td><td>Python Programming</td><td>05/12/2025</td><td>10 AM - 1 PM</td><td>FN</td></tr>
                    <tr><td>120E1C</td><td>Financial Accounting - 1</td><td>12/12/2025</td><td>10 AM - 1 PM</td><td>FN</td></tr>
                </table>

                <p style="margin-top:10px;font-size:12px;">
                    <b>Disclaimer:</b> Verify timetable with the University.
                </p>
            </div>

            <!-- INSTRUCTIONS -->
            <div style="border:2px solid #000;padding:15px;margin-top:20px;border-radius:6px;background:#fff;font-size:13px;line-height:1.5;">
                <b>INSTRUCTIONS TO CANDIDATES:</b><br><br>
                1. Corrections must be reported immediately.<br>
                2. Preserve Hall Ticket till all exams are over.<br>
                3. Write Register Number clearly.<br>
                4. No mobile phones or notes allowed.<br>
                5. Be seated 10 minutes before exam.<br>
                6. Check correct question paper.<br>
                7. Carry College ID.<br><br>

                <b>Dr. C. Arulvasu, Ph.D.</b>
            </div>

            <div style="margin-top:20px;display:flex;justify-content:space-between;">
                <b>Principal Signature</b>
                <b>Controller of Examinations</b>
            </div>

        </div>
        `;
    });

    document.getElementById("output").innerHTML = out;
}
</script>

</body>
</html>